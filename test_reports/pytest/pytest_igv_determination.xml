<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="6" skipped="0" tests="12" time="1.133" timestamp="2026-01-21T03:46:56.348363+00:00" hostname="agent-env-e239d1e0-6c02-421d-a60c-53636ddfd58d"><testcase classname="tests.test_igv_determination.TestExpenseIGVToggle" name="test_create_expense_with_igv_enabled" time="0.384"><failure message="AssertionError: Failed to create expense: {&quot;id&quot;:&quot;93735cd4-37aa-40c7-b4e6-0679acd18703&quot;,&quot;company_id&quot;:&quot;b9fe9962-ea98-4f99-9c1a-983bffbe5660&quot;,&quot;workspace_id&quot;:&quot;0c1b3883-c4c3-4287-b6e5-31a009934053&quot;,&quot;username&quot;:&quot;spencer3009&quot;,&quot;amount&quot;:590.0,&quot;category&quot;:&quot;herramientas&quot;,&quot;description&quot;:&quot;TEST_IGV_Gasto con IGV incluido&quot;,&quot;date&quot;:&quot;2026-01-21&quot;,&quot;status&quot;:&quot;paid&quot;,&quot;project_id&quot;:null,&quot;project_name&quot;:null,&quot;vendor_name&quot;:null,&quot;vendor_id&quot;:null,&quot;is_recurring&quot;:false,&quot;recurrence_period&quot;:null,&quot;priority&quot;:&quot;medium&quot;,&quot;due_date&quot;:null,&quot;notes&quot;:null,&quot;includes_igv&quot;:true,&quot;base_imponible&quot;:500.0,&quot;igv_gasto&quot;:90.0,&quot;created_at&quot;:&quot;2026-01-21T03:46:56.823172+00:00&quot;,&quot;updated_at&quot;:&quot;2026-01-21T03:46:56.823172+00:00&quot;}&#10;assert 200 == 201&#10; +  where 200 = &lt;Response [200]&gt;.status_code">tests/test_igv_determination.py:72: in test_create_expense_with_igv_enabled
    assert response.status_code == 201, f"Failed to create expense: {response.text}"
E   AssertionError: Failed to create expense: {"id":"93735cd4-37aa-40c7-b4e6-0679acd18703","company_id":"b9fe9962-ea98-4f99-9c1a-983bffbe5660","workspace_id":"0c1b3883-c4c3-4287-b6e5-31a009934053","username":"spencer3009","amount":590.0,"category":"herramientas","description":"TEST_IGV_Gasto con IGV incluido","date":"2026-01-21","status":"paid","project_id":null,"project_name":null,"vendor_name":null,"vendor_id":null,"is_recurring":false,"recurrence_period":null,"priority":"medium","due_date":null,"notes":null,"includes_igv":true,"base_imponible":500.0,"igv_gasto":90.0,"created_at":"2026-01-21T03:46:56.823172+00:00","updated_at":"2026-01-21T03:46:56.823172+00:00"}
E   assert 200 == 201
E    +  where 200 = &lt;Response [200]&gt;.status_code</failure></testcase><testcase classname="tests.test_igv_determination.TestExpenseIGVToggle" name="test_create_expense_without_igv" time="0.038"><failure message="AssertionError: Failed to create expense: {&quot;id&quot;:&quot;4dd87b48-27e5-4874-843d-bd82e92d6d3e&quot;,&quot;company_id&quot;:&quot;b9fe9962-ea98-4f99-9c1a-983bffbe5660&quot;,&quot;workspace_id&quot;:&quot;0c1b3883-c4c3-4287-b6e5-31a009934053&quot;,&quot;username&quot;:&quot;spencer3009&quot;,&quot;amount&quot;:500.0,&quot;category&quot;:&quot;otros&quot;,&quot;description&quot;:&quot;TEST_IGV_Gasto sin IGV&quot;,&quot;date&quot;:&quot;2026-01-21&quot;,&quot;status&quot;:&quot;paid&quot;,&quot;project_id&quot;:null,&quot;project_name&quot;:null,&quot;vendor_name&quot;:null,&quot;vendor_id&quot;:null,&quot;is_recurring&quot;:false,&quot;recurrence_period&quot;:null,&quot;priority&quot;:&quot;medium&quot;,&quot;due_date&quot;:null,&quot;notes&quot;:null,&quot;includes_igv&quot;:false,&quot;base_imponible&quot;:500.0,&quot;igv_gasto&quot;:0.0,&quot;created_at&quot;:&quot;2026-01-21T03:46:56.890264+00:00&quot;,&quot;updated_at&quot;:&quot;2026-01-21T03:46:56.890264+00:00&quot;}&#10;assert 200 == 201&#10; +  where 200 = &lt;Response [200]&gt;.status_code">tests/test_igv_determination.py:110: in test_create_expense_without_igv
    assert response.status_code == 201, f"Failed to create expense: {response.text}"
E   AssertionError: Failed to create expense: {"id":"4dd87b48-27e5-4874-843d-bd82e92d6d3e","company_id":"b9fe9962-ea98-4f99-9c1a-983bffbe5660","workspace_id":"0c1b3883-c4c3-4287-b6e5-31a009934053","username":"spencer3009","amount":500.0,"category":"otros","description":"TEST_IGV_Gasto sin IGV","date":"2026-01-21","status":"paid","project_id":null,"project_name":null,"vendor_name":null,"vendor_id":null,"is_recurring":false,"recurrence_period":null,"priority":"medium","due_date":null,"notes":null,"includes_igv":false,"base_imponible":500.0,"igv_gasto":0.0,"created_at":"2026-01-21T03:46:56.890264+00:00","updated_at":"2026-01-21T03:46:56.890264+00:00"}
E   assert 200 == 201
E    +  where 200 = &lt;Response [200]&gt;.status_code</failure></testcase><testcase classname="tests.test_igv_determination.TestExpenseIGVToggle" name="test_expense_default_includes_igv_false" time="0.038"><failure message="AssertionError: Failed to create expense: {&quot;id&quot;:&quot;e5442f51-aacd-4b7c-8839-1693adbd337b&quot;,&quot;company_id&quot;:&quot;b9fe9962-ea98-4f99-9c1a-983bffbe5660&quot;,&quot;workspace_id&quot;:&quot;0c1b3883-c4c3-4287-b6e5-31a009934053&quot;,&quot;username&quot;:&quot;spencer3009&quot;,&quot;amount&quot;:300.0,&quot;category&quot;:&quot;otros&quot;,&quot;description&quot;:&quot;TEST_IGV_Gasto default&quot;,&quot;date&quot;:&quot;2026-01-21&quot;,&quot;status&quot;:&quot;paid&quot;,&quot;project_id&quot;:null,&quot;project_name&quot;:null,&quot;vendor_name&quot;:null,&quot;vendor_id&quot;:null,&quot;is_recurring&quot;:false,&quot;recurrence_period&quot;:null,&quot;priority&quot;:&quot;medium&quot;,&quot;due_date&quot;:null,&quot;notes&quot;:null,&quot;includes_igv&quot;:false,&quot;base_imponible&quot;:300.0,&quot;igv_gasto&quot;:0.0,&quot;created_at&quot;:&quot;2026-01-21T03:46:56.931870+00:00&quot;,&quot;updated_at&quot;:&quot;2026-01-21T03:46:56.931870+00:00&quot;}&#10;assert 200 == 201&#10; +  where 200 = &lt;Response [200]&gt;.status_code">tests/test_igv_determination.py:137: in test_expense_default_includes_igv_false
    assert response.status_code == 201, f"Failed to create expense: {response.text}"
E   AssertionError: Failed to create expense: {"id":"e5442f51-aacd-4b7c-8839-1693adbd337b","company_id":"b9fe9962-ea98-4f99-9c1a-983bffbe5660","workspace_id":"0c1b3883-c4c3-4287-b6e5-31a009934053","username":"spencer3009","amount":300.0,"category":"otros","description":"TEST_IGV_Gasto default","date":"2026-01-21","status":"paid","project_id":null,"project_name":null,"vendor_name":null,"vendor_id":null,"is_recurring":false,"recurrence_period":null,"priority":"medium","due_date":null,"notes":null,"includes_igv":false,"base_imponible":300.0,"igv_gasto":0.0,"created_at":"2026-01-21T03:46:56.931870+00:00","updated_at":"2026-01-21T03:46:56.931870+00:00"}
E   assert 200 == 201
E    +  where 200 = &lt;Response [200]&gt;.status_code</failure></testcase><testcase classname="tests.test_igv_determination.TestIGVDetermination" name="test_get_expenses_with_igv_fields" time="0.043"><failure message="AssertionError: Failed to get expenses: Internal Server Error&#10;assert 520 == 200&#10; +  where 520 = &lt;Response [520]&gt;.status_code">tests/test_igv_determination.py:161: in test_get_expenses_with_igv_fields
    assert response.status_code == 200, f"Failed to get expenses: {response.text}"
E   AssertionError: Failed to get expenses: Internal Server Error
E   assert 520 == 200
E    +  where 520 = &lt;Response [520]&gt;.status_code</failure></testcase><testcase classname="tests.test_igv_determination.TestIGVDetermination" name="test_summary_endpoint_exists" time="0.040" /><testcase classname="tests.test_igv_determination.TestIGVDetermination" name="test_incomes_for_igv_calculation" time="0.041" /><testcase classname="tests.test_igv_determination.TestIGVCalculationLogic" name="test_igv_calculation_formula" time="0.037"><failure message="AssertionError: Failed to create income: {&quot;id&quot;:&quot;3c633ddb-b08f-478e-ab63-6cc8fc5423b2&quot;,&quot;company_id&quot;:&quot;b9fe9962-ea98-4f99-9c1a-983bffbe5660&quot;,&quot;workspace_id&quot;:&quot;0c1b3883-c4c3-4287-b6e5-31a009934053&quot;,&quot;username&quot;:&quot;spencer3009&quot;,&quot;amount&quot;:1180.0,&quot;paid_amount&quot;:1180.0,&quot;pending_balance&quot;:0.0,&quot;source&quot;:&quot;ventas&quot;,&quot;description&quot;:&quot;TEST_IGV_Venta para cálculo IGV&quot;,&quot;date&quot;:&quot;2026-01-21&quot;,&quot;status&quot;:&quot;collected&quot;,&quot;project_id&quot;:null,&quot;project_name&quot;:null,&quot;client_name&quot;:null,&quot;client_id&quot;:null,&quot;due_date&quot;:null,&quot;notes&quot;:null,&quot;created_at&quot;:&quot;2026-01-21T03:46:57.103085+00:00&quot;,&quot;updated_at&quot;:&quot;2026-01-21T03:46:57.103085+00:00&quot;}&#10;assert 200 == 201&#10; +  where 200 = &lt;Response [200]&gt;.status_code">tests/test_igv_determination.py:226: in test_igv_calculation_formula
    assert income_resp.status_code == 201, f"Failed to create income: {income_resp.text}"
E   AssertionError: Failed to create income: {"id":"3c633ddb-b08f-478e-ab63-6cc8fc5423b2","company_id":"b9fe9962-ea98-4f99-9c1a-983bffbe5660","workspace_id":"0c1b3883-c4c3-4287-b6e5-31a009934053","username":"spencer3009","amount":1180.0,"paid_amount":1180.0,"pending_balance":0.0,"source":"ventas","description":"TEST_IGV_Venta para cálculo IGV","date":"2026-01-21","status":"collected","project_id":null,"project_name":null,"client_name":null,"client_id":null,"due_date":null,"notes":null,"created_at":"2026-01-21T03:46:57.103085+00:00","updated_at":"2026-01-21T03:46:57.103085+00:00"}
E   assert 200 == 201
E    +  where 200 = &lt;Response [200]&gt;.status_code</failure></testcase><testcase classname="tests.test_igv_determination.TestIGVCalculationLogic" name="test_igv_a_favor_scenario" time="0.177" /><testcase classname="tests.test_igv_determination.TestFilterModes" name="test_expenses_filter_by_date" time="0.042"><failure message="assert 520 == 200&#10; +  where 520 = &lt;Response [520]&gt;.status_code">tests/test_igv_determination.py:324: in test_expenses_filter_by_date
    assert response.status_code == 200
E   assert 520 == 200
E    +  where 520 = &lt;Response [520]&gt;.status_code</failure></testcase><testcase classname="tests.test_igv_determination.TestFilterModes" name="test_incomes_filter_by_date" time="0.042" /><testcase classname="tests.test_igv_determination.TestCleanup" name="test_cleanup_test_expenses" time="0.032" /><testcase classname="tests.test_igv_determination.TestCleanup" name="test_cleanup_test_incomes" time="0.072" /></testsuite></testsuites>